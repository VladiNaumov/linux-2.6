### Основные шаги загрузки ядра:

0. **Код загрузчика (Bootloader):**
	- Подготавливает систему к загрузке ядра. Он загружает ядро и начальные модули в память, и передает управление ядру.

1. **Стартовый код ядра (Entry Point):**
    - После передачи управления загрузчиком выполняется **стартовый код ядра**. Этот код находится в ассемблерных файлах (например, `arch/x86/boot/header.S` или `head.S`) и оотвечает за первичную инициализацию системы: настройка сегментов, загрузка таблиц страниц, подготовка стека и т. д.
    - Этот код переключает процессор в режим защищенной памяти (protected mode) и устанавливает основные параметры для дальнейшей загрузки.

2. **Функция `start_kernel`:**
    - Когда ассемблерный код завершает свою работу через ** ` calll mmain ` в ассемблерном файле header.S ** , управление передается функции **`asmlinkage void __init start_kernel(void)`**, которая расположена в файле `init/main.c`.
    - Эта функция запускает ключевые подсистемы ядра, такие как планировщик процессов, управление памятью и системные вызовы.

3. **Инициализация аппаратных драйверов:**
    - В этот момент ядро начинает обнаруживать и инициализировать аппаратное обеспечение системы. Это включает настройку драйверов для процессора, памяти, устройств ввода-вывода и других компонентов.

4. **Монтирование корневой файловой системы:**
    - Далее ядро пытается смонтировать корневую файловую систему (`root filesystem`). Это важно для запуска всех остальных программ и системных процессов. Обычно файловая система находится на жестком диске, но на этапе загрузки она может быть смонтирована с других источников, например, изначально через `initramfs` (Initial RAM Filesystem).

5. **Запуск процесса `init`:**
    - После того, как ядро завершает свою инициализацию, оно запускает первый процесс в системе — **`init`** (или его современные аналоги, например, `systemd`). Это процесс с PID 1, который запускает все остальные системные службы и пользовательские процессы.

### Заключение

Когда загрузчик передает управление ядру, процесс начинается с выполнения стартового кода на ассемблере, который переключает процессор в нужный режим. Затем выполняется функция `start_kernel`, которая инициализирует подсистемы ядра и драйверы. После этого монтируется файловая система, и запускается процесс `init`, который начинает запускать все остальные службы и программы в системе.